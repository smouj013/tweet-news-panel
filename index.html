<!doctype html>
<html lang="es" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="color-scheme" content="dark light" />
  <meta name="theme-color" content="#060812" />
  <meta name="description" content="News ‚Üí Tweet Template Panel (RSS directos + plantilla) ‚Äî GlobalEyeTV" />
  <meta name="robots" content="index,follow" />

  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="icon" sizes="32x32" href="./assets/icons/favicon-32.png" />
  <link rel="apple-touch-icon" href="./assets/icons/apple-touch-icon-180.png" />

  <link rel="preconnect" href="https://api.allorigins.win" crossorigin>
  <link rel="preconnect" href="https://api.codetabs.com" crossorigin>
  <link rel="preconnect" href="https://thingproxy.freeboard.io" crossorigin>
  <link rel="preconnect" href="https://r.jina.ai" crossorigin>

  <title>News ‚Üí Tweet Template Panel</title>
  <link rel="stylesheet" href="./styles.css" />
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">üõ∞Ô∏è</div>
      <div class="brandTxt">
        <div class="brandTitle">News ‚Üí Tweet Template Panel</div>
        <div class="brandSub">RSS directos + plantilla (GlobalEyeTV)</div>
      </div>
    </div>

    <div class="topControls">
      <div class="field">
        <label for="timeFilter">Ventana</label>
        <select id="timeFilter">
          <option value="10">10 min</option>
          <option value="30">30 min</option>
          <option value="60" selected>60 min</option>
          <option value="120">2 h</option>
          <option value="360">6 h</option>
          <option value="1440">24 h</option>
          <option value="0">Todo</option>
        </select>
      </div>

      <div class="field grow">
        <label for="searchBox">Buscar</label>
        <input id="searchBox" type="search" placeholder="Ucrania, OTAN, Espa√±a, terremoto..." autocomplete="off" />
      </div>

      <button id="btnRefresh" class="btn primary" title="Refrescar (Shift = forzar)">Refrescar</button>
      <button id="btnFeeds" class="btn" title="Gestionar feeds">Feeds</button>
      <button id="btnCheckUpdate" class="btn" title="Buscar actualizaci√≥n PWA">Update</button>
      <button id="btnHardReset" class="btn danger" title="Borrar cach√©s locales y reiniciar">Reset</button>
    </div>
  </header>

  <section class="ticker">
    <div id="tnpTickerInner" class="tickerInner">Listo.</div>
    <div id="tnpTrendsPop" class="trendsPop" aria-label="Tendencias / hashtags"></div>
  </section>

  <main class="layout">
    <!-- LEFT: COMPOSER -->
    <section class="panel composer">
      <div class="panelHeader">
        <div class="panelTitle">Plantilla</div>
        <div id="status" class="status">Cargando‚Ä¶</div>
      </div>

      <div class="grid2">
        <div class="field">
          <label for="liveUrl">Directo</label>
          <input id="liveUrl" type="url" placeholder="https://twitch.tv/globaleyetv" />
        </div>

        <div class="field">
          <label for="hashtags">Hashtags</label>
          <input id="hashtags" type="text" placeholder="#√öltimaHora #Espa√±a #Breaking" />
        </div>
      </div>

      <div class="field">
        <label for="headline">Titular</label>
        <input id="headline" type="text" placeholder="Escribe o selecciona una noticia‚Ä¶" />
      </div>

      <div class="field">
        <label for="sourceUrl">Fuente (URL original)</label>
        <input id="sourceUrl" type="url" placeholder="https://‚Ä¶" />
      </div>

      <div class="row">
        <label class="check"><input id="optIncludeLive" type="checkbox" checked> Incluir #ENVIVO</label>
        <label class="check"><input id="optIncludeSource" type="checkbox" checked> Incluir Fuente</label>
        <div class="spacer"></div>
        <button id="btnGenTags" class="btn">Auto-tags</button>
        <button id="btnResetTemplate" class="btn">Reset plantilla</button>
      </div>

      <div class="field">
        <label for="template">Plantilla base</label>
        <textarea id="template" rows="7" spellcheck="false"></textarea>
      </div>

      <div class="panelSubHeader">
        <div class="panelTitle">Preview</div>
        <div class="meta">
          <span id="charCount">0</span>
          <button id="btnTrim" class="btn small">Ajustar</button>
        </div>
      </div>

      <textarea id="preview" class="preview" rows="7" readonly></textarea>
      <div id="warn" class="warn" hidden></div>

      <div class="row">
        <button id="btnCopyUrl" class="btn">Copiar URL</button>
        <button id="btnCopy" class="btn primary">Copiar Tweet</button>
        <button id="btnX" class="btn">Abrir en X</button>
      </div>

      <hr class="sep" />

      <div class="panelHeader">
        <div class="panelTitle">Filtros / rendimiento</div>
      </div>

      <div class="grid3">
        <div class="field">
          <label for="delayMin">Min. antig√ºedad</label>
          <input id="delayMin" type="number" min="0" step="1" value="0" />
        </div>

        <div class="field">
          <label for="sortBy">Orden</label>
          <select id="sortBy">
            <option value="impact" selected>Impacto (TOP)</option>
            <option value="new">M√°s nuevo</option>
            <option value="old">M√°s viejo</option>
          </select>
        </div>

        <div class="field">
          <label for="showLimit">Mostrar</label>
          <input id="showLimit" type="number" min="20" step="10" value="120" />
        </div>
      </div>

      <div class="grid3">
        <label class="check"><input id="optOnlyReady" type="checkbox" checked> Solo ‚ÄúLISTO‚Äù</label>
        <label class="check"><input id="optOnlySpanish" type="checkbox" checked> Priorizar ES</label>
        <label class="check"><input id="optHideUsed" type="checkbox" checked> Ocultar usados</label>
      </div>

      <div class="grid3">
        <label class="check"><input id="optResolveLinks" type="checkbox" checked> Resolver enlaces</label>
        <label class="check"><input id="optShowOriginal" type="checkbox" checked> Poner URL original</label>
        <label class="check"><input id="optAutoRefresh" type="checkbox" checked> Auto-refresh</label>
      </div>

      <div class="grid3">
        <div class="field">
          <label for="refreshSec">Auto-refresh (s)</label>
          <input id="refreshSec" type="number" min="15" step="5" value="60" />
        </div>

        <div class="field">
          <label for="fetchCap">Cap descarga</label>
          <input id="fetchCap" type="number" min="10" step="10" value="180" />
        </div>

        <div class="field">
          <label for="batchFeeds">Batch feeds</label>
          <input id="batchFeeds" type="number" min="1" step="1" value="6" />
        </div>
      </div>

      <div class="field">
        <label for="catFilter">Categor√≠a</label>
        <select id="catFilter">
          <option value="all" selected>Todo</option>
          <option value="spain">Espa√±a</option>
          <option value="world">Mundo</option>
          <option value="economy">Econom√≠a</option>
          <option value="tech">Tech</option>
          <option value="security">Sucesos/Seguridad</option>
          <option value="sports">Deportes</option>
          <option value="health">Salud</option>
          <option value="culture">Cultura</option>
        </select>
      </div>
    </section>

    <!-- RIGHT: NEWS -->
    <section class="panel news">
      <div class="panelHeader">
        <div class="panelTitle">Noticias</div>
        <div class="hint">Click en una noticia ‚Üí se rellena la plantilla</div>
      </div>
      <div id="newsList" class="newsList"></div>
    </section>
  </main>

  <!-- MODAL FEEDS -->
  <div id="modal" class="modal" hidden>
    <div class="modalCard" role="dialog" aria-modal="true" aria-label="Gestionar feeds">
      <div class="modalHeader">
        <div class="panelTitle">Feeds (RSS directos)</div>
        <button id="btnCloseModal" class="btn small">Cerrar</button>
      </div>

      <div class="grid2">
        <div class="field">
          <label for="newFeedName">Nombre</label>
          <input id="newFeedName" type="text" placeholder="Ej: RTVE ‚Äî Mundo" />
        </div>
        <div class="field">
          <label for="newFeedUrl">URL RSS</label>
          <input id="newFeedUrl" type="url" placeholder="https://‚Ä¶" />
        </div>
      </div>

      <div class="row">
        <button id="btnAddFeed" class="btn primary">A√±adir</button>
        <button id="btnRestoreDefaultFeeds" class="btn">Restaurar defaults</button>
        <div class="spacer"></div>
        <button id="btnExportFeeds" class="btn">Export</button>
        <button id="btnImportFeeds" class="btn">Import</button>
        <button id="btnSaveFeeds" class="btn primary">Guardar</button>
      </div>

      <div id="feedList" class="feedList"></div>

      <div class="field">
        <label for="feedsJson">Import/Export JSON</label>
        <textarea id="feedsJson" rows="6" spellcheck="false" placeholder='[{"name":"‚Ä¶","url":"‚Ä¶","enabled":true,"cat":"world"}]'></textarea>
      </div>
    </div>
  </div>

  <script src="./app.js"></script>
</body>
</html>
